{% extends 'index.twig' %}

{% block body %}
   {# using 'with' eagerly loads the data, I guess? #}
   {% set blocks = entry.contentBlocks.all() %}
    {% for block in blocks %}
       {% set camel = block.type.handle %}
       {% include("_components/blocks/#{camel}.twig") with {'block': block} only %}
   {% endfor %}
{% endblock body %}